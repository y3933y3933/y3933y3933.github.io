---
title: Angular元件基礎
date: "2023-01-24T13:22:42.848Z"
featuredImgUrl: https://user-images.githubusercontent.com/28300286/214067370-5c860982-516d-433e-b836-fb259f45b268.png
featuredImgAlt: Angular
tag: Angular
slug: angular-component-basic
---

> 此系列文參考[Angular 官方文件](https://angular.tw/)，使用 Angular 15.1 的版本

# 元件概述

元件(Components)在現今的 Web 應用程式是一個很重要的概念，網頁主要由元件像堆積木一般建構，舉凡你在網頁上看到的按鈕、輸入框，都可以被視為元件，使用元件可以讓開發人員減少重複地程式碼、便於修改。

<br />
在Angular中的元件最基本的構成要素有: - `HTML Template` : 畫面渲染內容。 - `TypeScript
Class` : 放置變數、方法等程式碼邏輯。 - `CSS Selector`: 定義元件在範本(Template)中的使用名稱。
- `Css Styles`: CSS 樣式 (Optional)

# 建立元件

現在讓我們進入一個情境，我這個年代的應該都有經歷過楓之谷，假如我現在想建立一個肥肥元件，可以使用 Angular CLI 幫我快速建立:
![肥肥](https://user-images.githubusercontent.com/28300286/214292992-56847ed7-5e84-47d4-aae4-3fa6d891f145.png)

開啟命令列，輸入以下指令:

```
ng g component fatfat
```

(g 為 generate 的縮寫，fatfat 可以替換成任意命名)

<br />
Angular CLI會自動建立以下檔案: ![image](https://user-images.githubusercontent.com/28300286/214293393-d5a5ce5a-9df4-4feb-a8f8-7348fd3a8d99.png)

- `fatfat.component.ts` : TypeScript 類
- `fatfat.component.html` : HTML 範本
- `fatfat.component.css` : CSS 樣式
- `fatfat.component.spec.ts`: 測試檔案

<br />
這裡我們主要看一下TypeScript類的檔案，大致上結構如下:

```Ts,file=fatfat.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-fatfat',
  templateUrl: './fatfat.component.html',
  styleUrls: ['./fatfat.component.css']
})
export class FatfatComponent {

}

```

其中`@Component({})`區域內定義了該元件的基本配置:

```Ts,file=fatfat.component.ts
@Component({
  selector: 'app-fatfat',
  templateUrl: './fatfat.component.html',
  styleUrls: ['./fatfat.component.css']
})
```

- `selector`: 可以定義元件的選擇名稱，如:`app-fatfat`，表示如果要在範本中渲染此元素，可以使用`<app-fatfat></app-fatfat>`。
- `templateUrl`: 定義範本的路徑
- `styleUrls`: 提供定義多個 CSS 樣式的路徑。

## 顯示元件

顯示元件的方法也很簡單，在前面使用 Angular CLI 時，有一行`UPDATE src/app/app.module.ts`，是 Angular CLI 自動幫我們做的。

<br />
在使用元件時，需要將元件import至要使用的元件的`module`，這部分之後的文章再提，可以先忽略。
<br />
要讓畫面上顯示，只需要在範本上添加元件的selector名稱，以前述為例，添加`<app-fatfat></app-fatfat>
```html,file=app.component.html
<app-fatfat></app-fatfat>
```

# 元件樣式

在 Angular 中，CSS 樣式預設會被封裝在元件中，不會汙染全域，但`@Component({})`中也提供自定義封裝選項，但這邊先不提，有興趣可以參考[官方文件-參考封裝](https://angular.tw/guide/view-encapsulation)。

## 特殊選擇器

### :host

建立元件時，都會產生一個`@Component({selector:''})`中定義的元素，該元素被稱為宿主元素，以此例來說，Angular 會在 DOM 中建立一個`<app-fatfat></app-fatfat>`的元素。

<br/>
`:host`選擇器可以讓我們針對宿主元素做樣式處理，所以假設我今天希望肥肥元件本身寬度為`200px`，可以這樣寫:
```css,file=fatfat.component.css
:host{
  width:200px;
}

````

### :host-context
如果要依據宿主的祖先元素來決定是否顯示樣式，可以使用`:host-context`選擇器，所以假設我今天希望上層有`acitve`Class時，肥肥元件顏色顯示為紅色，可以這樣寫:

```html,file=app.component.html
<div class="active">
  <app-fatfat></app-fatfat>
</div>


```

```css,file=fatfat.component.css
:host-context(.active){
color: red;
}
````

![:host-context](https://user-images.githubusercontent.com/28300286/214309238-ba23a431-4e3f-43fe-8cf8-516cfe52f887.png)
  

### /deep/、>>>、::ng-deep

過去有寫過 Angular 小夥伴可能會使用`/deep/`、`>>>`、`::ng-deep`選擇器，Angular 官方表示將在未來移除對其的支援，所以盡量不要再用了。
